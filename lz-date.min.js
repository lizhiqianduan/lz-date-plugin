!function(a){function b(a){return"object"==typeof a?!0:!1}function c(a){return"function"==typeof a?!0:!1}function d(a){return"[object Array]"===Object.prototype.toString.call(a)?!0:!1}function e(){for(var a=window.navigator.userAgent,b=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),c=0;c<b.length;c++)if(a.indexOf(b[c])>0)return!0;return!1}function f(a,b,c){for(var d in b)a[d]=b[d],c&&null!=c[d]&&(a[d]=c[d]);return a}a.fn.lzDate=function(g){function h(){function a(){d.on("tap",function(a){j()}),c.on("tap",function(){k()})}function b(){d.on("click",function(a){j()}),c.on("click",function(){k()})}var c=s.find(".lastMonth"),d=s.find(".nextMonth");e()?(a(),i()):b()}function i(){var a=s.find(".month_body");a.on("swipeLeft",function(){j()}),a.on("swipeRight",function(){k()})}function j(){r.clearMarksBeforeTurnPage&&o(null);var a=s.find(".monthTitle .year"),b=s.find(".monthTitle .month"),d=a.text(),e=b.text(),d=parseInt(d),e=parseInt(e);12==e?(b.text(1),a.text(d+1)):b.text(e+1),m(d,e+1),i(),s.find(".month_body").eq(0).fadeOut(100,function(){s.find(".month_body").eq(0).remove()}),s.find(".month_body").eq(1).css({left:"100%"}),s.find(".month_body").eq(1).css("display","block"),s.find(".month_body").eq(1).animate({left:0},200,function(){c(r.turnPageEndCallBack)&&r.turnPageEndCallBack(s.find(".top .year").text(),s.find(".top .month").text())})}function k(){r.clearMarksBeforeTurnPage&&o(null);var a=s.find(".monthTitle .year"),b=s.find(".monthTitle .month"),d=a.text(),e=b.text(),d=parseInt(d),e=parseInt(e);1==e?(b.text(12),a.text(d-1)):b.text(e-1),m(d,e-1),i(),s.find(".month_body").eq(0).fadeOut(100,function(){s.find(".month_body").eq(0).remove()}),s.find(".month_body").eq(1).css({left:"-100%"}),s.find(".month_body").eq(1).css("display","block"),s.find(".month_body").eq(1).animate({left:0},200,function(){c(r.turnPageEndCallBack)&&r.turnPageEndCallBack(s.find(".top .year").text(),s.find(".top .month").text())})}function l(a,b,c){var b=parseInt(b)-1,c=parseInt(c),e=new Date(a,b,c),a=e.getFullYear(),b=e.getMonth()+1,c=e.getDate(),b=9>=b?"0"+b:b,c=9>=c?"0"+c:c,f=(""+a+b+c).trim(),g=r.marks;if(!d(g)||0==g.length)return!1;for(var h=0;h<g.length;h++){var i=(""+g[h].markDate).trim();if(f==i)return g[h]}return!1}function m(a,c){function d(){var a=s.find(".month_wrap .month_body").last(),b='<div class="week"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div>';return a.append(b),a.find(".week").last()}var a=parseInt(a),c=parseInt(c)-1,e=new Date(a,c,1),f=new Date(a,c+1,0),g=e.getDate(),h=f.getDate(),i=e.getDay(),j=f.getDay(),k=(new Date(a,c,g-i),new Date(a,c,h+6-j),h+6-j-(g-i)+1);s.find(".month_wrap").append("<div class='month_body'></div>");for(var m=0;k>m;m+=7)for(var n=d(),o=m,p=0;m+7>o;o++,p++){var q=new Date(a,c,g-i+o);n.find("span").eq(p).html(q.getDate());var t=new Date,u=new Date(t.getFullYear(),t.getMonth(),t.getDate()),v=l(a,c+1,g-i+o);b(v)&&(n.find("span").eq(p).html('<i class="lzDate-'+v.markType+'">'+q.getDate()+"</i>"),n.find("span").eq(p).find("i").append('<i class="lzDate-markText">'+v.markText+"</i>")),1==r.curDayStyle&&q.getTime()==u.getTime()&&(n.find("span").eq(p).html('<i class="curDay">'+q.getDate()+"</i>"),b(v)&&n.find("span").eq(p).find("i.curDay").append('<i class="lzDate-markText">'+v.markText+"</i>")),new Date(a,c,0).getTime()<q.getTime()&&q.getTime()<=new Date(a,c+1,0).getTime()||n.find("span").eq(p).addClass("notCurMonth")}!function(){s.find(".month_wrap").height(s.find(".month_body").last().height())}(),s.find(".curDay").append('<i style="position: absolute;bottom: 2px;left:15px; width:4px;height: 4px; border-radius: 50%; background-color: #fff;"></i>')}function n(){s.find(".month_wrap").html("");var a=s.find(".top .year").text(),b=s.find(".top .month").text();m(parseInt(a),parseInt(b)),i()}function o(a){r.marks=a,n()}function p(a){r.marks=r.marks.concat(a),n()}{var q={curDayStyle:!0,marks:[{markDate:"20141214",markType:"output",markText:"+1"},{markDate:"20141213",markType:"input",markText:"+6"}],clearMarksBeforeTurnPage:!1,turnPageEndCallBack:null},r=f({},q,g),s=a(this).eq(0),t=(new Date).getFullYear(),u=(new Date).getMonth()+1;(new Date).getDate()}return function(){var a='<div class="top"><div class="lastMonth btn"><</div><div class="monthTitle"><div class="forCenter"><span class="year">2014</span>年<span class="month">12</span>月</div></div><div class="nextMonth btn">></div></div><div class="day_title"><span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span></div><div class="month_wrap"></div>';s.html(a),s.find(".top .year").eq(0).html(t),s.find(".top .month").eq(0).html(u),m(t,u),h()}(),{setMarks:o,addMarks:p,getMarks:function(){return r.marks}}}}($);